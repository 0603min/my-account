<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 é›²ç«¯è¨˜å¸³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #f8fafc; font-family: sans-serif; }
        .glass { background: white; border-radius: 20px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
    </style>
</head>
<body class="p-5">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-5 text-center">ğŸ’° æˆ‘çš„é›²ç«¯å¸³æœ¬</h1>
        
        <div class="glass p-6 mb-5 text-center">
            <p class="text-gray-500 text-sm">ç¸½é¤˜é¡</p>
            <h2 id="bal" class="text-3xl font-bold">$ 0</h2>
        </div>

        <div class="glass p-6 mb-5 space-y-3">
            <input id="desc" type="text" placeholder="é …ç›®" class="w-full p-3 border rounded-xl outline-none focus:ring-2 ring-blue-500">
            <input id="amt" type="number" placeholder="é‡‘é¡" class="w-full p-3 border rounded-xl outline-none focus:ring-2 ring-blue-500">
            <div class="flex gap-2">
                <button onclick="add('income')" class="flex-1 bg-green-500 text-white py-3 rounded-xl font-bold">å­˜å…¥</button>
                <button onclick="add('expense')" class="flex-1 bg-red-500 text-white py-3 rounded-xl font-bold">æ”¯å‡º</button>
            </div>
        </div>

        <div id="list" class="space-y-2"></div>
    </div>

    <script>
        const API = 'https://script.google.com/macros/s/AKfycbzLAWeTRW4efS5NHRXrYD9Hd5qZGsBeV7U6IMRf-EOxLPP9IO4cVPjpSzyGntwRjwd1eg/exec'; // <--- é€™è£¡æ›æˆä½ çš„ç¶²å€

        window.onload = load;

        async function load() {
            const res = await fetch(API);
            const data = await res.json();
            let b = 0;
            document.getElementById('list').innerHTML = data.reverse().map(i => {
                const isInc = i.type === 'income';
                b += isInc ? i.amount : -i.amount;
                return `<div class="glass p-4 flex justify-between">
                    <div><b>${i.desc}</b><br><small class="text-gray-400">${new Date(i.date).toLocaleDateString()}</small></div>
                    <span class="${isInc?'text-green-500':'text-red-500'} font-bold">${isInc?'+':'-'}$${i.amount}</span>
                </div>`;
            }).join('');
            document.getElementById('bal').innerText = `$ ${b}`;
        }

        async function add(type) {
            const desc = document.getElementById('desc').value;
            const amount = document.getElementById('amt').value;
            if(!desc || !amount) return alert('è«‹å¡«å¯«');
            
            // ç«‹å³é¡¯ç¤ºè¼‰å…¥æ„Ÿ
            document.body.style.opacity = '0.5';
            await fetch(API, { method: 'POST', body: JSON.stringify({ desc, amount: Number(amount), type }) });
            location.reload();
        }
    </script>
</body>
</html>